# Overview
Designing a good relational model is difficult. Here are some guidelines for doing it well

# Guidelines
## Similarity
> The attributes of a relation should make sense

- Objective: minimise the similarity between relations
- Attributes from different entities shouldn't be in the same relation
- Relationships between relations should be represented with [[Keys#Primary|primary]] and [[Keys#Foreign|foreign]] key

> [!EXAMPLE]
> An employee works on a project for 2 hours
> `WORKS_ON(SSN (FK), PNO (FK), Hours)`

## Redundancy
> Avoid redundant tuples (repeated information)

- Repetition is inefficient
	- Wastes storage
	- Duplicates must be kept consistent, leading to more overhead in fundamental operations
- Replicas are often the result of consistency anomalies

> [!EXAMPLE] Redundant information
> `EMP_PROJ(SSN (PK), Pnumber (PK), Hours, Ename, Pname, Plocation)`
> 
> The employee and project information should be stored in separate tables

^89dd0a

## Nulls
> Relations should have as few `NULL` values as possible

- If an attribute is often `NULL`, move them to separate relations
	- Reduces storage wastage and uncertainty

When to use `NULL`:
- A value is not applicable or invalid
	- E.G an employee that has no dependents
- A value is not known
	- E.G email not provided
- A value exists but isn't available
	- E.G the system doesn't have access to the external service that holds the value

> [!EXAMPLE] Moving a frequently `NULL` field
> `Employee(SSN (PK), Name, Phone#1, Phone#2, Phone#3)`
>
>If `Phone#3` is frequently, move it to another relation:
>`3rdPhone (SSN (PK, FK), Phone#3)

## Fictitious tuples
> Design relations to avoid fictitious tuples after joins

- Fictitious tuples are tuples that don't exist in the real data

> [!EXAMPLE] Fictitious tuples generated by a join
> If `EMP_PROJ` was split into the following relations:
> `EMP_PROJ(SSN (PK), Ename, Pnumber (P), Pname, Plocation)`
> `PROJ_HOURS(Hours, Plocation)`
>
>The following query would lead to fictitious tuples
>```sql
>SELECT
>	EMP_PROJ.Ename, PROJ_HOURS.Hours
>FROM
>	EMP_PROJ, PROJ_HOURS
>JOIN
>	EMP_PROJ ON PROJ_HOURS.Plocation = EMP_PROJ.Plocation
>```
>
>With the following instances of the original `EMP_PROJ` schema:
>`r1 = (111, "PR1", Glasgow, 20)`
>`r2 = (222, "PR1", Glasgow, 10)`
>
>The query would create incorrect tuples like `(111, "PR1", Glasgow, 10)` and `(222, "PR1", Glasgow, 20)`

# Anomalies
Anomalies are [[data integrity]] violations caused by poor database design

## Update anomaly
- When updating a tuple results in an anomaly
![[#^89dd0a]]

If you updated the `Pname` of a project, you would need to ensure that all tuples are updated or else there will be anomalies. This is redundant work

## Delete anomaly
- When deleting something causes extra information to be deleted
![[#^89dd0a]]

If you deleted tuples where `Pnumber = 2`, you would also delete the employee information stored in those tuples. In this case, employees would be forgotten by the system